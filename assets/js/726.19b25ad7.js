(window.webpackJsonp=window.webpackJsonp||[]).push([[726],{2018:function(t,e,a){"use strict";a.r(e);var s=a(36),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"create-a-react-micro-frontend"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-react-micro-frontend"}},[t._v("#")]),t._v(" Create a React Micro Frontend")]),t._v(" "),a("h2",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[t._v("#")]),t._v(" Prerequisites")]),t._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/v7.1/docs/getting-started/"}},[t._v("A working instance of Entando")])],1),t._v(" "),a("li",[t._v("Verify dependencies with the "),a("RouterLink",{attrs:{to:"/v7.1/docs/getting-started/entando-cli.html#check-the-environment"}},[t._v("Entando CLI")]),t._v(": "),a("code",[t._v("ent check-env develop")])],1)]),t._v(" "),a("h2",{attrs:{id:"create-a-react-app-in-an-entando-bundle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-react-app-in-an-entando-bundle"}},[t._v("#")]),t._v(" Create a React App in an Entando Bundle")]),t._v(" "),a("h3",{attrs:{id:"create-the-bundle-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-the-bundle-project"}},[t._v("#")]),t._v(" Create the Bundle Project")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Initialize a new bundle project with the default files and folders:")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("ent bundle init simple-bundle\n")])])])]),t._v(" "),a("li",[a("p",[t._v("From the root bundle folder, add an MFE to the bundle project:")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" simple-bundle\nent bundle mfe "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" simple-mfe\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"create-a-simple-react-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-simple-react-app"}},[t._v("#")]),t._v(" Create a Simple React App")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://create-react-app.dev/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Create React App"),a("OutboundLink")],1),t._v(" allows you to generate a simple app in seconds.")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Create a React app in "),a("code",[t._v("/simple-bundle/microfrontends/")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("npx create-react-app microfrontends/simple-mfe --use-npm\n")])])]),a("p",[t._v('Assign the same bundle name you chose when adding an MFE to overwrite the empty "simple-mfe" folder.')])]),t._v(" "),a("li",[a("p",[t._v("From the root bundle folder, start the new app :")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("ent bundle run simple-mfe\n")])])]),a("p",[t._v("The React app should open in your browser at "),a("code",[t._v("http://localhost:3000")]),t._v(".")])])]),t._v(" "),a("h3",{attrs:{id:"configure-the-custom-element"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-the-custom-element"}},[t._v("#")]),t._v(" Configure the Custom Element")]),t._v(" "),a("p",[t._v("The steps below wrap the app component with an HTML custom element. The "),a("code",[t._v("connectedCallback")]),t._v(" method renders the React app when the custom element is added to the DOM.")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("In "),a("code",[t._v("simple-mfe/src")]),t._v(", create a directory named "),a("code",[t._v("custom-elements")])])]),t._v(" "),a("li",[a("p",[t._v("In "),a("code",[t._v("custom-elements")]),t._v(", create a new file named "),a("code",[t._v("public-path.js")]),t._v(" with the following code. This will enable your React MFE to serve static assets when deployed in Entando. If you use a different name for your custom element, you should change it on the second line.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" publicpath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("entando"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("widgets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'simple-mfe'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("basePath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("publicpath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" publicpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        publicpath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("publicpath"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eslint-disable-next-line no-undef")]),t._v("\n    __webpack_public_path__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" publicpath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("In the same directory, create "),a("code",[t._v("WidgetElement.js")]),t._v(" with this code:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./public-path.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ReactDOM "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom/client'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../App'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WidgetElement")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HTMLElement")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connectedCallback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mountPoint "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mountPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" root "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ReactDOM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRoot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mountPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("App "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ncustomElements"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("define")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'simple-mfe'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" WidgetElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Custom Element Names")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://stackoverflow.com/questions/22545621/do-custom-elements-require-a-dash-in-their-name",target:"_blank",rel:"noopener noreferrer"}},[t._v("Must contain a hyphen "),a("code",[t._v("-")]),t._v(" in the name"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Cannot be a single word")]),t._v(" "),a("li",[t._v("Should follow "),a("code",[t._v("kebab-case")]),t._v(" naming convention")])])])])]),t._v(" "),a("h3",{attrs:{id:"display-the-custom-element"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#display-the-custom-element"}},[t._v("#")]),t._v(" Display the Custom Element")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Replace the entire contents of "),a("code",[t._v("src/index.js")]),t._v(" with these two lines:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./index.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./custom-elements/WidgetElement'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("In "),a("code",[t._v("public/index.html")]),t._v(", replace "),a("code",[t._v('<div id="root"></div>')]),t._v(" with the following:")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("simple-mfe")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Observe your browser automatically redisplay the React app.")])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Congratulations!")]),t._v(" "),a("p",[t._v("You’re now using a custom element to display a React app.")])]),t._v(" "),a("h2",{attrs:{id:"display-the-react-mfe-in-entando"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#display-the-react-mfe-in-entando"}},[t._v("#")]),t._v(" Display the React MFE in Entando")]),t._v(" "),a("ol",[a("li",[a("RouterLink",{attrs:{to:"/v7.1/tutorials/create/pb/publish-project-bundle.html"}},[t._v("Publish the bundle project")])],1)]),t._v(" "),a("h3",{attrs:{id:"view-the-widget"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#view-the-widget"}},[t._v("#")]),t._v(" View the Widget")]),t._v(" "),a("p",[t._v("Place the React micro frontend onto a page to see it in action.")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("In the "),a("code",[t._v("Entando App Builder")]),t._v(", go to "),a("code",[t._v("Pages")]),t._v(" → "),a("code",[t._v("Management")])])]),t._v(" "),a("li",[a("p",[t._v("Choose an existing page (or "),a("RouterLink",{attrs:{to:"/v7.1/tutorials/compose/page-management.html#create-a-page"}},[t._v("create a new one")]),t._v(") and select "),a("code",[t._v("Design")]),t._v(" from its Actions")],1)]),t._v(" "),a("li",[a("p",[t._v("Find your widget in the "),a("code",[t._v("Widgets")]),t._v(" sidebar and drag it onto the page")])]),t._v(" "),a("li",[a("p",[t._v("Click "),a("code",[t._v("Publish")])])]),t._v(" "),a("li",[a("p",[t._v("Click on "),a("code",[t._v("View Published Page")])])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Congratulations!")]),t._v(" "),a("p",[t._v("You now have a React micro frontend running in Entando!")])]),t._v(" "),a("p",[a("strong",[t._v("Next Steps")])]),t._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/v7.1/tutorials/create/mfe/widget-configuration.html"}},[t._v("Add a Configuration MFE in App Builder")])],1),t._v(" "),a("li",[a("RouterLink",{attrs:{to:"/v7.1/tutorials/create/mfe/epc.html"}},[t._v("Create an Entando Platform Capability")]),t._v(" with your React bundle")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);