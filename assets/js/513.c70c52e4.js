(window.webpackJsonp=window.webpackJsonp||[]).push([[513],{1681:function(e,t,a){"use strict";a.r(t);var n=a(36),r=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"creating-an-entando-component-repository-ecr-bundle-using-git-repository"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-an-entando-component-repository-ecr-bundle-using-git-repository"}},[e._v("#")]),e._v(" Creating an Entando Component Repository (ECR) bundle using git repository")]),e._v(" "),a("h2",{attrs:{id:"purpose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#purpose"}},[e._v("#")]),e._v(" Purpose")]),e._v(" "),a("p",[e._v("Generate a simple Entando Component Repository (ECR) bundle shareable in an Entando 6 environment using git repository")]),e._v(" "),a("h2",{attrs:{id:"requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),a("p",[e._v("You can create the bundle using you favorite code editor. To share the bundle you will need:")]),e._v(" "),a("ol",[a("li",[e._v("NodeJS, "),a("code",[e._v("npm")]),e._v(", and "),a("code",[e._v("git")])]),e._v(" "),a("li",[e._v("A K8S cluster where to upload the bundle (e.g. minikube, microk8s, minishift) configured correctly for Entando 6")]),e._v(" "),a("li",[e._v("A namespace in the cluster reachable from the operator and entando-k8s-service")]),e._v(" "),a("li",[e._v("The "),a("code",[e._v("entando-bundle-cli")]),e._v(" command-line tool to generate the necessary metadata to share the bundle in a Kubernetes cluster")])]),e._v(" "),a("h2",{attrs:{id:"steps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#steps"}},[e._v("#")]),e._v(" Steps")]),e._v(" "),a("h3",{attrs:{id:"_1-create-a-bundle-folder"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-create-a-bundle-folder"}},[e._v("#")]),e._v(" 1. Create a bundle folder")]),e._v(" "),a("p",[e._v("To start, let’s create a new folder to host your bundle.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("mkdir example-bundle && cd example-bundle\n")])])]),a("h3",{attrs:{id:"_2-add-a-descriptor-yaml-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-add-a-descriptor-yaml-file"}},[e._v("#")]),e._v(" 2. Add a descriptor.yaml file")]),e._v(" "),a("p",[e._v("For a bundle to be readable by the ECR it will need at least a "),a("code",[e._v("descriptor.yaml")]),e._v(" file in the folder. Let’s create it with some minimal information.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("vim descriptor.yaml\n")])])]),a("p",[e._v("Here is some content for your base descriptor.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("code: example-bundle\ndescription: This is an example of an Entando 6 bundle\n\ncomponents:\n")])])]),a("h3",{attrs:{id:"_3-add-a-simple-component-to-the-bundle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-add-a-simple-component-to-the-bundle"}},[e._v("#")]),e._v(" 3. Add a simple component to the bundle")]),e._v(" "),a("p",[e._v("This bundle will contains only a simple widget.")]),e._v(" "),a("p",[e._v("Let’s first create the widget metadata in a dedicated folder.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("mkdir widgets\n\nvim widgets/example-widget.yaml\n")])])]),a("p",[e._v("Now let’s populate the "),a("code",[e._v("example-widget.yaml")]),e._v(" metadata with some content:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("code: example-widget\ntitles:\n  en: Example Widget\n  it: Widget d'esempio\ngroup: free\ncustomUi: <h2>Hi from Example Widget</h2>\n")])])]),a("p",[e._v("Finally, add a reference to this widget in the bundle "),a("code",[e._v("descriptor.yaml")]),e._v(" file.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("code: example-bundle\ndescription: This is an example of a Entando 6 bundle\n\ncomponents:\n    widgets:\n        - widgets/example-widget.yaml\n")])])]),a("h3",{attrs:{id:"_4-initialize-git-and-add-remote-repository"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-initialize-git-and-add-remote-repository"}},[e._v("#")]),e._v(" 4. Initialize git and add remote repository")]),e._v(" "),a("p",[e._v("From the bundle root, run")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('git init\ngit add .\ngit commit -m "Init Git repository"\n')])])]),a("p",[e._v("This will initialize an empty Git repository and commit files.")]),e._v(" "),a("p",[e._v("Add remote repository as origin and push the bundle.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("git remote add origin https://your/remote/repository.git\ngit push -u origin master\n")])])]),a("blockquote",[a("p",[a("strong",[e._v("Important")])]),e._v(" "),a("p",[a("code",[e._v("descriptor.yaml")]),e._v(" file has to be at the root of repository.")])]),e._v(" "),a("h3",{attrs:{id:"_5-publish-a-git-tag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-publish-a-git-tag"}},[e._v("#")]),e._v(" 5. Publish a git tag")]),e._v(" "),a("p",[e._v("Your bundle has to have a tag. To add it, run")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('git tag -a "v0.0.1" -m "My first tag"\ngit push --tags\n')])])]),a("h3",{attrs:{id:"_6-create-the-entandodebundle-custom-resource-for-kubernetes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-create-the-entandodebundle-custom-resource-for-kubernetes"}},[e._v("#")]),e._v(" 6. Create the EntandoDeBundle custom resource for Kubernetes")]),e._v(" "),a("p",[e._v('Assuming the "entando-bundle-cli" command-line utility is already installed and available globally on your system, you can now convert the module into an EntandoDeBundle K8S custom resource. We assume you have a namespace in a Kubernetes cluster which is readable from the Entando Operator and you have the permissions to create resources there. Let’s call this namespace '),a("code",[e._v("accessible-ns")])]),e._v(" "),a("p",[e._v("You can also provide a thumbnail for your bundle using "),a("code",[e._v("--thumbnail-url=<your-thumbnail-url")]),e._v(".")]),e._v(" "),a("p",[e._v("Run the "),a("code",[e._v("entando-bundle from-git")]),e._v(" command providing your remote git repository link (created in step 4) as "),a("code",[e._v("--repository")]),e._v(" option:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("entando-bundle from-git --name=example-bundle --namespace=accessible-ns --repository=https://your/remote/repository.git --dry-run > example-bundle.yaml\n")])])]),a("h3",{attrs:{id:"_7-upload-the-bundle-to-kubernetes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-upload-the-bundle-to-kubernetes"}},[e._v("#")]),e._v(" 7. Upload the bundle to Kubernetes.")]),e._v(" "),a("p",[e._v("Now you simply need to upload the bundle into Kubernetes.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("kubectl create -f example-bundle.yaml\n")])])]),a("h2",{attrs:{id:"conclusion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conclusion"}},[e._v("#")]),e._v(" Conclusion")]),e._v(" "),a("p",[e._v("You should now have the bundle available in your cluster and accessible from the App Builder.")]),e._v(" "),a("h2",{attrs:{id:"resources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#resources"}},[e._v("#")]),e._v(" Resources")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/entando-k8s/entando-bundle-cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("Entando Bundle CLI\nproject"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);