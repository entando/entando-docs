(window.webpackJsonp=window.webpackJsonp||[]).push([[696],{1976:function(e,t,a){"use strict";a.r(t);var n=a(36),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"api-management"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-management"}},[e._v("#")]),e._v(" API Management")]),e._v(" "),a("p",[e._v("An API claim informs the Entando Platform that a micro frontend (MFE) intends to use the API of a microservice (MS). This request can be sent within a single bundle or across bundles. The abstraction of an API claim eliminates the need to define and manage API endpoints, both in local development and within a running instance.")]),e._v(" "),a("h2",{attrs:{id:"internal-vs-external-api-claim"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#internal-vs-external-api-claim"}},[e._v("#")]),e._v(" Internal vs. External API Claim")]),e._v(" "),a("p",[e._v("An MFE can initiate both internal and external API claims. An internal claim specifies an MS API in the same bundle as the MFE, while an external claim specifies the MS API of another bundle in the same Kubernetes namespace.")]),e._v(" "),a("p",[e._v("The structure of internal and external API claims are as follows:")]),e._v(" "),a("p",[a("strong",[e._v("Internal API claim")])]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"int-api"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"internal"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"serviceName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"int-ms"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[a("strong",[e._v("External API claim")])]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"ext-api"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"external"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"serviceName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"ext-ms"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"bundle"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"registry.hub.docker.com/my-org/my-entando-bundle"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h2",{attrs:{id:"api-claim-commands"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-claim-commands"}},[e._v("#")]),e._v(" API Claim Commands")]),e._v(" "),a("p",[e._v("Common operations associated with API claims are detailed below. To execute "),a("code",[e._v("ent bundle api")]),e._v(" subcommands, the user must be connected to a running Entando instance (via "),a("code",[e._v("ent attach-*")]),e._v(") or the CLI will generate an authentication error.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[e._v("Command")]),e._v(" "),a("th",{staticStyle:{"text-align":"left"}},[e._v("Description")])])]),e._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[e._v("ent bundle api add [mfe-name] [claim-name]")])]),e._v(" "),a("td",{staticStyle:{"text-align":"left"}},[e._v("Add an internal API claim to an MFE")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[e._v("ent bundle api add-ext [mfe-name] [claim-name]")])]),e._v(" "),a("td",{staticStyle:{"text-align":"left"}},[e._v("Add an external API claim to an MFE")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[e._v("ent bundle api rm [mfe-name] [claim-name]")])]),e._v(" "),a("td",{staticStyle:{"text-align":"left"}},[e._v("Remove an API claim from an MFE")])])])]),e._v(" "),a("p",[a("strong",[e._v("Command details:")])]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("api add")]),e._v(" supports the following options:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("serviceName")]),e._v(": The name of a microservice in the same bundle as the micro frontend")]),e._v(" "),a("li",[a("code",[e._v("serviceUrl")]),e._v(": The URL of a microservice deployed in the local environment")])])]),e._v(" "),a("li",[a("p",[a("code",[e._v("api add-ext")]),e._v(" supports the following options:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("bundle")]),e._v(": The external bundle URL")]),e._v(" "),a("li",[a("code",[e._v("serviceName")]),e._v(": The name of a microservice in the external bundle. If "),a("code",[e._v("service-name")]),e._v(" is not set, "),a("code",[e._v("api add-ext")]),e._v(" will initiate an interactive mode where the user can select from available bundles and microservices.")])])]),e._v(" "),a("li",[a("p",[a("code",[e._v("api add-ext")]),e._v(" requirements:")]),e._v(" "),a("ul",[a("li",[e._v("Connection to an Entando instance")]),e._v(" "),a("li",[e._v("The cluster contains the service specified in the API claim")]),e._v(" "),a("li",[e._v("The external service has already been deployed")])])]),e._v(" "),a("li",[a("p",[e._v("Executing "),a("code",[e._v("api add-ext")]),e._v(" without flags:")]),e._v(" "),a("ul",[a("li",[e._v("Returns the current instance")]),e._v(" "),a("li",[e._v("Displays the instance's available services for interactive selection")])])])]),e._v(" "),a("h2",{attrs:{id:"microservice-url-retrieval"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#microservice-url-retrieval"}},[e._v("#")]),e._v(" Microservice URL Retrieval")]),e._v(" "),a("p",[e._v("To retrieve the URL of an MS declared through an API claim, add "),a("code",[e._v("systemParams.api[claimName].url")]),e._v(" to the MFE JavaScript code so it can access that element of the config object. The "),a("code",[e._v("claimName")]),e._v(" is chosen by the user when the API claim was defined.")]),e._v(" "),a("p",[a("strong",[e._v("Installed Bundles")])]),e._v(" "),a("p",[e._v('The configuration data of installed bundles are provided by the Entando instance. To render an MFE from an installed bundle, Entando injects a JSON object containing configuration details inside the "config" attribute of a custom HTML element, e.g. '),a("code",[e._v('<my-mfe config="{ ... }" />')]),e._v(".")]),e._v(" "),a("p",[a("strong",[e._v("Local Bundles")])]),e._v(" "),a("p",[e._v("When an MFE is tested locally, it is tested in isolation, external to an Entando instance. The file "),a("code",[e._v("mfe-config.json")]),e._v(" is used to generate the required configuration object when an MFE runs without Entando. The MS URL is retrieved from "),a("code",[e._v("mfe-config.json")]),e._v(', which is stored in the "public" MFE folder, e.g:')]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n    "systemParams": {\n        "api": {\n            "my-api-claim": {\n                "url": "http://localhost:8082"\n            }\n        }\n    }\n}\n')])])]),a("p",[e._v("This file contains data used for local development only. The commands that add and remove API claims update "),a("code",[e._v("mfe-config.json")]),e._v(" automatically.")])])}),[],!1,null,null,null);t.default=s.exports}}]);