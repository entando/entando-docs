(window.webpackJsonp=window.webpackJsonp||[]).push([[672],{1937:function(t,e,a){"use strict";a.r(e);var s=a(36),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"plugin-configuration-profiles"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugin-configuration-profiles"}},[t._v("#")]),t._v(" Plugin Configuration Profiles")]),t._v(" "),a("p",[t._v("This tutorial describes three methods to utilize configuration profiles to specify resource allocation for Entando plugins. This provides a simple way to customize plugin deployment parameters for improved efficiency.")]),t._v(" "),a("h2",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[t._v("#")]),t._v(" Prerequisites")]),t._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/v7.0/tutorials/devops/entando-operator.html"}},[t._v("Add an Entando Operator ConfigMap")]),t._v(" if needed")],1),t._v(" "),a("li",[t._v("Enable this property under the "),a("code",[t._v("data")]),t._v(" section so that the Entando Operator can manage resource settings.")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("entando.k8s.operator.impose.limits")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v("\n")])])]),a("h2",{attrs:{id:"profile-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#profile-options"}},[t._v("#")]),t._v(" Profile Options")]),t._v(" "),a("p",[t._v("A profile is a set of configurations encoded as YAML embedded in the "),a("code",[t._v("OperatorConfigMap")]),t._v(" as a string, since ConfigMaps cannot be multilevel.")]),t._v(" "),a("p",[t._v("The three methods to insert configuration profiles are:")]),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"#method-1-inline-profile"}},[t._v("Inline Profile")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#method-2-mapped-profile"}},[t._v("Mapped Profile")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#method-3-default-profile"}},[t._v("Default Profile")])])]),t._v(" "),a("h2",{attrs:{id:"configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[t._v("#")]),t._v(" Configuration")]),t._v(" "),a("p",[t._v("Currently, the resources for memory and CPU can be specified. When you specify a "),a("code",[t._v("limit")]),t._v(" on a resource, it is the upper limit allowed for the container. The units for the resources are listed below but should not be included in the specification. Resource settings help Kubernetes determine in which node a pod should be created.")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources.limits.cpu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("       integer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" millicpus\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources.limits.memory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("    integer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mebibytes\n")])])]),a("p",[t._v("The examples below use "),a("code",[t._v("YOUR-PLUGIN")]),t._v(", "),a("code",[t._v("YOUR-PLUGIN-CODE")]),t._v(", "),a("code",[t._v("YOUR-ORG")]),t._v(", "),a("code",[t._v("YOUR-BUNDLE")]),t._v(" and "),a("code",[t._v("YOUR-PROFILE-NAME")]),t._v(" as placeholders. Also note the use of "),a("code",[t._v("|-")]),t._v(" to designate a new line in the code.")]),t._v(" "),a("h3",{attrs:{id:"retrieve-the-plugin-id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#retrieve-the-plugin-id"}},[t._v("#")]),t._v(" Retrieve the Plugin ID")]),t._v(" "),a("p",[t._v("You will need to "),a("RouterLink",{attrs:{to:"/v7.0/docs/reference/entando-cli.html"}},[t._v("retrieve the Plugin ID")]),t._v(" which is calculated during installation and written to the EntandoPlugin Custom Resource as part of the deployment of the plugin microservice. Use the following command from the project directory")],1),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("ent prj get-plugin-id --auto\n")])])]),a("p",[t._v("If you just have a bundle, use this command with the appropriate parameters")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("ent ecr get-plugin-id --autho --repo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("YOUR-BUNDLE-REPO-URL\n")])])]),a("p",[t._v("Example:")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ ent ecr get-plugin-id --auto --repo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://github.com/entando-samples/entando-hub-application-bundle.git\npn-cee95efc-77ff566e-entandopsdh-entando-hub-catalog-ms\n")])])]),a("h3",{attrs:{id:"method-1-inline-profile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-1-inline-profile"}},[t._v("#")]),t._v(" Method 1: Inline Profile")]),t._v(" "),a("p",[t._v("Add the parameters to the "),a("code",[t._v("OperatorConfigMap")]),t._v(" as an inline profile at "),a("code",[t._v("data/entando.profile.plugins.YOUR-PLUGIN-ID")]),t._v(".")]),t._v(" "),a("p",[t._v("Example:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("entando.profile.plugins.YOUR-PLUGIN-ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources.limits.cpu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1000"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources.limits.memory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2000"')]),t._v("\n")])])]),a("h3",{attrs:{id:"method-2-mapped-profile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-2-mapped-profile"}},[t._v("#")]),t._v(" Method 2: Mapped Profile")]),t._v(" "),a("ol",[a("li",[t._v("Create the parameter profile in the "),a("code",[t._v("OperatorConfigMap")]),t._v(" of the data profile at "),a("code",[t._v("data/entando.profile.YOUR-PROFILE-NAME")]),t._v(".")])]),t._v(" "),a("p",[t._v("Example:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("entando.profile.YOUR-PROFILE-NAME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources.limits.cpu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1000"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources.limits.memory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2000"')]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Add a reference in the "),a("code",[t._v("profileMapping")]),t._v(" file at "),a("code",[t._v("data/entando.plugins.profileMapping")]),t._v(":")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("entando.plugins.profileMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("your-plugin-id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" YOUR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("PROFILE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("NAME\n")])])]),a("h3",{attrs:{id:"method-3-default-profile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-3-default-profile"}},[t._v("#")]),t._v(" Method 3: Default Profile")]),t._v(" "),a("ol",[a("li",[t._v("Add the profile to the "),a("code",[t._v("OperatorConfigMap")]),t._v(" in the data section at "),a("code",[t._v("data/entando.profile.YOUR-PROFILE-NAME")]),t._v(".")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("entando.profile.YOUR-PROFILE-NAME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources.limits.cpu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1000"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources.limits.memory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2000"')]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Add a reference to the profile at "),a("code",[t._v("data/entando.plugins.defaultProfile")]),t._v(":")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("entando.plugins.defaultProfile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" YOUR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("PROFILE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("NAME\n")])])]),a("h2",{attrs:{id:"references"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[t._v("#")]),t._v(" References")]),t._v(" "),a("p",[t._v("Please refer to the "),a("a",{attrs:{href:"https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kubernetes documentation on Resources"),a("OutboundLink")],1),t._v(" for more details.")])])}),[],!1,null,null,null);e.default=r.exports}}]);