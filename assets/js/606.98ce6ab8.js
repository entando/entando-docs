(window.webpackJsonp=window.webpackJsonp||[]).push([[606],{1835:function(e,t,a){"use strict";a.r(t);var s=a(36),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"tutorial-selecting-the-default-databases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tutorial-selecting-the-default-databases"}},[e._v("#")]),e._v(" Tutorial: Selecting the default databases")]),e._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),a("p",[e._v("This document provides a guide to changing an Entando environment by selecting the default databases used.\nSee "),a("RouterLink",{attrs:{to:"/v6.3/tutorials/devops/external-database/"}},[e._v("External Database")]),e._v(" to connect to a database outside of the cluster.")],1),e._v(" "),a("h2",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),a("ul",[a("li",[e._v("An environment to install your Entando applicaiton")]),e._v(" "),a("li",[e._v("Network access from your Kubernetes cluster to your database")])]),e._v(" "),a("h2",{attrs:{id:"tutorial"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tutorial"}},[e._v("#")]),e._v(" Tutorial")]),e._v(" "),a("p",[e._v("If needed you can set the desired component to use a specific DBMS by updating the Helm-generated yaml file (e.g. 'entando.yaml' from "),a("a",{attrs:{href:"../../docs/getting-started"}},[e._v("Getting Started")]),e._v(" as follows:")]),e._v(" "),a("ol",[a("li",[e._v("open the chosen file and search for "),a("code",[e._v("EntandoCompositeApp")]),e._v(" custom resource")]),e._v(" "),a("li",[e._v("identify the component to update in the related list")]),e._v(" "),a("li",[e._v("update the "),a("code",[e._v("spec.dbms")]),e._v(" property with the desired value (you can specify different DBMS for different components)")])]),e._v(" "),a("p",[e._v("Repeat previous steps for all components you need to change used DBMS on.")]),e._v(" "),a("p",[e._v("Valid values for "),a("code",[e._v("spec.dbms")]),e._v(" property are: "),a("code",[e._v("none")]),e._v(", "),a("code",[e._v("postgresql")]),e._v(", "),a("code",[e._v("mysql")]),e._v(", "),a("code",[e._v("oracle")]),e._v(".")]),e._v(" "),a("p",[a("code",[e._v("none")]),e._v(" value will result in using an embedded database with in-file persistence strategy.")]),e._v(" "),a("p",[e._v("Please note that using embedded databases into distributed systems forces to have only 1 replica per pod.\nThis happens because the volume claimed by each replica points to the same files,\nso the first container locking the files will prevent next replicas to obtain access to the DB files.\nNote that this affects also deployments rolling updates")]),e._v(" "),a("p",[e._v("If you need to update your deployment, there is a known workaround consisting in setting the replicas number to 0, waiting for pod shutdown completion, update the deployment yaml file, then updating again to 1 the replicas value. In this way, the newly created containers will be able to startup correctly and access the embedded database files on the filesystem.")]),e._v(" "),a("p",[e._v("These considerations lead us to discourage embedded database use into production environments.")])])}),[],!1,null,null,null);t.default=o.exports}}]);