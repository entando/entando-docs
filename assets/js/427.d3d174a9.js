(window.webpackJsonp=window.webpackJsonp||[]).push([[427],{1565:function(e,t,a){"use strict";a.r(t);var i=a(36),o=Object(i.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"objective"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#objective"}},[e._v("#")]),e._v(" Objective")]),e._v(" "),a("p",[e._v("The objective of this lab is to briefly introduce the Entando JHipster Blueprint and to provide an introduction to using the blueprint to generate a microservice and micro-frontends for deployment into an Entando application.")]),e._v(" "),a("h2",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Java 1.8")])]),e._v(" "),a("li",[a("p",[e._v("Maven 3.0.5+")])]),e._v(" "),a("li",[a("p",[e._v("npm 6+")])]),e._v(" "),a("li",[a("p",[e._v("git")])]),e._v(" "),a("li",[a("p",[e._v("Docker")])]),e._v(" "),a("li",[a("p",[e._v("node 10+ (or LTS)")])])]),e._v(" "),a("h2",{attrs:{id:"setup-for-blueprint-dev-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setup-for-blueprint-dev-mode"}},[e._v("#")]),e._v(" Setup for Blueprint Dev mode")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Install JHipster "),a("code",[e._v("npm install -g generator-jhipster@6.9.1")])])]),e._v(" "),a("li",[a("p",[e._v("Clone the entando blueprint project to a location of your choice")])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git clone https://github.com/entando/entando-blueprint\ncd entando-blueprint\ngit checkout -b v6.1.1\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[e._v("Run this command from within entando-blueprint: "),a("code",[e._v("npm link")])])]),e._v(" "),a("li",[a("p",[e._v("Create a new empty directory in a location of your choice outside of existing projects. Don’t create this inside the entando-blueprint project (as example create the folder: "),a("code",[e._v("/entando/hello-world")]),e._v(")")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("This will be the directory where you create your plugin.")])]),e._v(" "),a("li",[a("p",[e._v("It is important that the commands below are run in the directory you are creating.")])])])]),e._v(" "),a("li",[a("p",[e._v("On a command line change into the directory that you just created and run "),a("code",[e._v("npm link generator-jhipster-entando")])])]),e._v(" "),a("li",[a("p",[e._v("Create a plugin using the blueprint. Run the following command "),a("code",[e._v("jhipster --blueprints entando")])])]),e._v(" "),a("li",[a("p",[e._v("Select the following options (if nothing is specified in this list you can choose any available option)")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Microservice application")])]),e._v(" "),a("li",[a("p",[e._v("Name of application: training (Or whatever you want)")])]),e._v(" "),a("li",[a("p",[e._v("Port: 8081")])]),e._v(" "),a("li",[a("p",[e._v("Default package: com.entando (or whatever you want)")])]),e._v(" "),a("li",[a("p",[e._v("SQL")])]),e._v(" "),a("li",[a("p",[e._v("MySQL or Postgres")])]),e._v(" "),a("li",[a("p",[e._v("H2 with disk based persistence")])]),e._v(" "),a("li",[a("p",[e._v("Yes, with the Caffeine implementation")])]),e._v(" "),a("li",[a("p",[e._v("2nd level cache: Yes")])]),e._v(" "),a("li",[a("p",[e._v("Maven")])]),e._v(" "),a("li",[a("p",[e._v("Do not select any other technologies")])]),e._v(" "),a("li",[a("p",[e._v("Accept the provided suggestion for the bundle name")])]),e._v(" "),a("li",[a("p",[e._v("i18n: Yes")])]),e._v(" "),a("li",[a("p",[e._v("Pick a default language")])]),e._v(" "),a("li",[a("p",[e._v("Pick other languages you want")])]),e._v(" "),a("li",[a("p",[e._v("Don’t add any other testing frameworks")])]),e._v(" "),a("li",[a("p",[e._v("No other generators from the marketplace")])])])]),e._v(" "),a("li",[a("p",[e._v("Adding an Entity and Creating the Micro-Frontends. In your new project run the following command "),a("code",[e._v("jhipster entity Conference")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Select Yes for “Do you want to add a field to your entity”")])]),e._v(" "),a("li",[a("p",[e._v("For the name of the field use: conferenceName")])]),e._v(" "),a("li",[a("p",[e._v("Select String for type")])]),e._v(" "),a("li",[a("p",[e._v("Select No for validation rules")])]),e._v(" "),a("li",[a("p",[e._v("Select Yes for “Do you want to add a field to your entity”")])]),e._v(" "),a("li",[a("p",[e._v("For the name of the field use: location")])]),e._v(" "),a("li",[a("p",[e._v("Select String for type")])]),e._v(" "),a("li",[a("p",[e._v("Select No for validation rules")])]),e._v(" "),a("li",[a("p",[e._v("Select No for adding relationships")])]),e._v(" "),a("li",[a("p",[e._v("Select No for Do you want to use separate service class for your\nbusiness logic?")])]),e._v(" "),a("li",[a("p",[e._v("You can choose any option you want here")])])])])]),e._v(" "),a("p",[e._v("Repeat the steps above for other entities that you want to add. Also, review the content and documentation around the JHipster Design Language (JDL) "),a("a",{attrs:{href:"https://start.jhipster.tech/jdl-studio/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://start.jhipster.tech/jdl-studio/"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"start-keycloak-using-docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-keycloak-using-docker-compose"}},[e._v("#")]),e._v(" Start keycloak using docker-compose")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Startup the Keycloak server:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("docker-compose -f src/main/docker/keycloak.yml up\n")])])])])]),e._v(" "),a("h3",{attrs:{id:"notes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#notes"}},[e._v("#")]),e._v(" Notes:")]),e._v(" "),a("p",[e._v("if you have to install docker compose you can follow this guide:\n"),a("a",{attrs:{href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.docker.com/compose/install/"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"start-the-microservice"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-the-microservice"}},[e._v("#")]),e._v(" Start the microservice")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Start the generated Microservice executing the command:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("./mvnw\n")])])])])]),e._v(" "),a("h3",{attrs:{id:"notes-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#notes-2"}},[e._v("#")]),e._v(" Notes:")]),e._v(" "),a("p",[e._v('If you want to reset the widget data (as example if you deleted all rows from the table widget) if during the generation of the microservice you selected "H2 with disk-based persistence" you can delete the target folder, restart the microservice and the data will be regenerated.')]),e._v(" "),a("h2",{attrs:{id:"start-the-table-widget"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-the-table-widget"}},[e._v("#")]),e._v(" Start the table widget")]),e._v(" "),a("p",[e._v("Now you can start your generated table widget:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Go to the table widget folder in your project:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("cd ui/widgets/<your-entity-name>/tableWidget\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Then install and start your widget executing the command:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("npm install && npm start\n")])])])]),e._v(" "),a("li",[a("p",[e._v("When the widget is started a browser window is opened and the widget URL is loaded")])]),e._v(" "),a("li",[a("p",[e._v("If you’re not logged in you’re redirected to the login page.")])]),e._v(" "),a("li",[a("p",[e._v("Log in using:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("Username: user\nPassword: user\n")])])])]),e._v(" "),a("li",[a("p",[e._v("After the login process you’ll be redirected to the widget page and you can see the table widget with some generated data.")])])]),e._v(" "),a("h2",{attrs:{id:"start-the-form-widget"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-the-form-widget"}},[e._v("#")]),e._v(" Start the form widget")]),e._v(" "),a("p",[e._v("Now you can start your generated form widget:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("If you are running another widget, stop it clicking "),a("code",[e._v("Ctrl+C")]),e._v(" in your widget command line window")])]),e._v(" "),a("li",[a("p",[e._v("Go to the form widget folder in your project:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("cd ui/widgets/<your-entity-name>/formWidget\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Then install and start your widget executing the command:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("npm install && npm start\n")])])])]),e._v(" "),a("li",[a("p",[e._v("When the widget is started a browser window is opened with and the widget URL is loaded")])]),e._v(" "),a("li",[a("p",[e._v("If you’re not logged in you’re redirected to the login page.")])]),e._v(" "),a("li",[a("p",[e._v("Log in using:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("Username: user\nPassword: user\n")])])])]),e._v(" "),a("li",[a("p",[e._v("You’ll be redirected to the widget page and you can see the widget form with the ID 1 loaded.")])])]),e._v(" "),a("h3",{attrs:{id:"form-widget-notes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#form-widget-notes"}},[e._v("#")]),e._v(" Form widget notes:")]),e._v(" "),a("p",[e._v("If you want to load other data you have to change the index.html file in the folder:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("cd ui/widgets/<your-entity-name>/formWidget/public\n")])])]),a("p",[e._v("and change the id attribute in this line:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('<my-entity-form service-url="%REACT_APP_SERVICE_URL%" id="1" />\n')])])]),a("h2",{attrs:{id:"start-the-details-widget"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-the-details-widget"}},[e._v("#")]),e._v(" Start the details widget")]),e._v(" "),a("p",[e._v("You can also start your generated details widget:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("If you are running another widget, stop it clicking "),a("code",[e._v("Ctrl+C")]),e._v(" in your widget command line window")])]),e._v(" "),a("li",[a("p",[e._v("Go to the details widget folder in your project:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("cd ui/widgets/<your-entity-name>/detailsWidget\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Then install and start your widget executing the command:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("npm install && npm start\n")])])])]),e._v(" "),a("li",[a("p",[e._v("When the widget is started a browser window is opened with and the widget URL is loaded")])]),e._v(" "),a("li",[a("p",[e._v("If you’re not logged in you’re redirected to the login page.")])]),e._v(" "),a("li",[a("p",[e._v("Log in using:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("Username: user\nPassword: user\n")])])])]),e._v(" "),a("li",[a("p",[e._v("You’ll be redirected to the widget page and you can see the widget form with the ID 1 loaded.")])])]),e._v(" "),a("h3",{attrs:{id:"widget-details-notes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#widget-details-notes"}},[e._v("#")]),e._v(" Widget Details notes:")]),e._v(" "),a("p",[e._v("If you want to load other data you have to change the index.html file in the public folder:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("cd ui/widgets/<your-entity-name>/detailsWidget/public\n")])])]),a("p",[e._v('and change the "id" attribute in this line:')]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('<my-entity-details service-url="%REACT_APP_SERVICE_URL%" id="1" />\n')])])]),a("h2",{attrs:{id:"notes-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#notes-3"}},[e._v("#")]),e._v(" Notes")]),e._v(" "),a("h3",{attrs:{id:"change-keycloak-dev-settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#change-keycloak-dev-settings"}},[e._v("#")]),e._v(" Change keycloak dev settings")]),e._v(" "),a("p",[e._v("If you want to change your keycloak settings to use another keycloak installation (not the docker compose pre configured one) or if you want to change the service-url of your widget you can change the parameters set in the .env.local file that was generated by the entando-blueprint in the root folder of your react widgets:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("cd ui/widgets/<your-entity-name>/tableWidget\n")])])]),a("p",[e._v("then edit the file "),a("code",[e._v(".env.local")])]),e._v(" "),a("p",[e._v("By default this variables are set to:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("REACT_APP_SERVICE_URL=http://localhost:8081/services/<your-application-name>/api\nREACT_APP_KEYCLOAK_URL=http://localhost:9080/auth\nREACT_APP_KEYCLOAK_REALM=jhipster\nREACT_APP_KEYCLOAK_CLIENT_ID=web_app\n")])])]),a("h3",{attrs:{id:"the-service-url-variable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-service-url-variable"}},[e._v("#")]),e._v(" The service-url Variable")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("service-url")]),e._v(" variable is the api Microservice API URL.")]),e._v(" "),a("h3",{attrs:{id:"user-is-not-authenticated-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user-is-not-authenticated-message"}},[e._v("#")]),e._v(" User is not authenticated message")]),e._v(" "),a("p",[e._v("When you run the widgets if you see the message: "),a("code",[e._v("User is not authenticated")]),e._v(". This means that probably your keycloak application is not running so please check if the docker-compose command is still in execution.")]),e._v(" "),a("h2",{attrs:{id:"open-the-project-in-an-ide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#open-the-project-in-an-ide"}},[e._v("#")]),e._v(" Open the project in an IDE")]),e._v(" "),a("p",[e._v("This section just walks through the anatomy of the project and the micro frontends.\nYou can skip this or review later as desired. The top level project is a normal Spring Boot application.\nYou can look through the code and configuration in src/main/java to get a view of the server side.\nThe micro frontends are in the ui folder. Each entity gets an MFE for details, table, and form.")])])}),[],!1,null,null,null);t.default=o.exports}}]);