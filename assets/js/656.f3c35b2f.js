(window.webpackJsonp=window.webpackJsonp||[]).push([[656],{1914:function(e,t,a){"use strict";a.r(t);var n=a(36),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"export-and-publish-a-bundle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#export-and-publish-a-bundle"}},[e._v("#")]),e._v(" Export and Publish a Bundle")]),e._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),a("p",[e._v("Use the bundler command to export a bundle of components from an existing Entando Application. An Entando Bundle can be used")]),e._v(" "),a("ul",[a("li",[e._v("For the initial install of Entando components into an Entando Application")]),e._v(" "),a("li",[e._v("To migrate Entando components from one environment to another (e.g. Dev to QA)")]),e._v(" "),a("li",[e._v("To provide a template for building a new Entando Application")]),e._v(" "),a("li",[e._v("As the skeleton of an Entando solution")])]),e._v(" "),a("p",[e._v("This command generates the same bundle directory structure as an Entando project, including a bundle descriptor file.")]),e._v(" "),a("h3",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),a("ul",[a("li",[e._v("Use the "),a("RouterLink",{attrs:{to:"/v7.0/docs/reference/entando-cli.html#check-the-environment"}},[e._v("Entando CLI")]),e._v(" to verify prerequisites (e.g. git, entando-bundler):")],1)]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("ent check-env develop \n")])])]),a("ul",[a("li",[e._v("A running Entando Application")]),e._v(" "),a("li",[a("RouterLink",{attrs:{to:"/v7.0/docs/consume/identity-management.html#logging-into-your-keycloak-instance"}},[e._v("Admin access to Keycloak")])],1)]),e._v(" "),a("p",[e._v("This tutorial assumes you're using an Entando quickstart application. You may need to adjust specific URLs, credentials, namespaces, etc., for a custom application.")]),e._v(" "),a("h2",{attrs:{id:"export-an-entando-bundle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#export-an-entando-bundle"}},[e._v("#")]),e._v(" Export an Entando Bundle")]),e._v(" "),a("h3",{attrs:{id:"set-up-the-keycloak-client"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-up-the-keycloak-client"}},[e._v("#")]),e._v(" Set Up the Keycloak Client")]),e._v(" "),a("p",[e._v("Configure a Keycloak client to grant the bundler access to the required Entando APIs.")]),e._v(" "),a("ol",[a("li",[e._v("Log in to Keycloak using the admin credentials. The URL will be similar to "),a("code",[e._v("http://YOUR-HOST-NAME/auth/")]),e._v(" and can be verified with the following command:")])]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("kubectl describe ingress/default-sso-in-namespace-ingress -n entando\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Go to "),a("code",[e._v("Clients")]),e._v(" → "),a("code",[e._v("Create")])]),e._v(" "),a("li",[e._v("Enter a "),a("code",[e._v("Client ID")]),e._v(" of your choice, e.g. "),a("code",[e._v("entando-bundler")])]),e._v(" "),a("li",[e._v("Click "),a("code",[e._v("Save")])]),e._v(" "),a("li",[e._v("The "),a("code",[e._v("Settings")]),e._v(" tab should be shown. Edit the values as follows:")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("Access Type")]),e._v(": confidential")]),e._v(" "),a("li",[a("code",[e._v("Service Accounts Enabled")]),e._v(": On")]),e._v(" "),a("li",[a("code",[e._v("Valid Redirect URLs")]),e._v(": *")]),e._v(" "),a("li",[a("code",[e._v("Web Origins")]),e._v(": *")])]),e._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[e._v("Click "),a("code",[e._v("Save")])]),e._v(" "),a("li",[e._v("Go to the "),a("code",[e._v("Service Account Roles")]),e._v(" tab")]),e._v(" "),a("li",[e._v("Select "),a("code",[e._v("Client Roles")]),e._v(" → "),a("code",[e._v("quickstart")])]),e._v(" "),a("li",[e._v("Select "),a("code",[e._v("Available Roles")]),e._v(" → "),a("code",[e._v("superuser")])]),e._v(" "),a("li",[e._v("Click "),a("code",[e._v("Add Selected")]),e._v(" to add "),a("code",[e._v("superuser")]),e._v(" to the "),a("code",[e._v("Assigned Roles")]),e._v(". This change will be saved automatically.")]),e._v(" "),a("li",[e._v("Go to the "),a("code",[e._v("Credentials")]),e._v(" tab and copy the "),a("code",[e._v("Secret")]),e._v(" shown there for use in the next section")])]),e._v(" "),a("h3",{attrs:{id:"create-env-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-env-json"}},[e._v("#")]),e._v(" Create env.json")]),e._v(" "),a("ol",[a("li",[e._v("Create a directory where you'll run the bundler and go to that directory:")])]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" testBundle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" testBundle\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Create an "),a("code",[e._v("env.json")]),e._v(" file with the environment URLs and client credentials. Refer to the "),a("a",{attrs:{href:"#set-up-the-keycloak-client"}},[e._v("client configuration")]),e._v(" for the "),a("code",[e._v("clientId")]),e._v(" and "),a("code",[e._v("clientSecret")]),e._v(" values.")])]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"coreBaseApi"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"http://YOUR-HOST-NAME/entando-de-app"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"componentManagerApi"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"http://YOUR-HOST-NAME/digital-exchange"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"clientId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"YOUR-CLIENT-ID"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"clientSecret"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"YOUR-CLIENT-SECRET"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h3",{attrs:{id:"run-the-bundler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-the-bundler"}},[e._v("#")]),e._v(" Run the Bundler")]),e._v(" "),a("ol",[a("li",[e._v("Create a child directory to store the bundler output. Choosing the name "),a("code",[e._v("bundle")]),e._v(" allows you to easily use the "),a("code",[e._v("ent prj")]),e._v(" command with this bundle.")])]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" bundle\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Run the bundler:")])]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("ent bundler from-env --location bundle --code YOUR-TEST-BUNDLE --description “Your Test Bundle”\n")])])]),a("p",[e._v("The bundler will inspect the application using Entando APIs, collect information about individual components, construct appropriate descriptor files and assemble the top-level descriptor file.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ ls bundle\nassets      contentModels  contents         fragments  labels     pageModels  resources\ncategories  contentTypes   descriptor.yaml  groups     languages  pages       widgets\n")])])]),a("p",[e._v("You now have a complete Entando project structure! You can inspect the output to edit the exported components or "),a("RouterLink",{attrs:{to:"/v7.0/tutorials/create/pb/publish-simple-bundle.html#publish-the-bundle"}},[e._v("deploy it to another Entando Application")]),e._v(".")],1)])}),[],!1,null,null,null);t.default=s.exports}}]);