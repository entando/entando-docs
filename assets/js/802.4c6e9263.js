(window.webpackJsonp=window.webpackJsonp||[]).push([[802],{2129:function(t,a,e){"use strict";e.r(a);var s=e(36),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"entando-mfe-context-parameters"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#entando-mfe-context-parameters"}},[t._v("#")]),t._v(" Entando MFE Context Parameters")]),t._v(" "),e("p",[t._v("Entando MFEs can be made more powerful using one or more configuration techniques:")]),t._v(" "),e("ol",[e("li",[t._v("Provide a "),e("RouterLink",{attrs:{to:"/v7.2/tutorials/create/mfe/widget-configuration.html"}},[t._v("configuration MFE")])],1),t._v(" "),e("li",[t._v("Access context parameters from the Entando Application")]),t._v(" "),e("li",[t._v("Set up API claims so MFEs are automatically connected to microservices in the same bundle or namespace")])]),t._v(" "),e("p",[t._v("This tutorial will demonstrate the second technique by making use of the most commonly used context parameters:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("page_code")]),t._v(": the code of the current page, e.g. "),e("code",[t._v("home")]),t._v(" or "),e("code",[t._v("my-page")])]),t._v(" "),e("li",[e("code",[t._v("info_currentLang")]),t._v(": the current language, e.g. "),e("code",[t._v("en")]),t._v(" or "),e("code",[t._v("it")])]),t._v(" "),e("li",[e("code",[t._v("systemParam_applicationBaseURL")]),t._v(": the full base URL of the Entando Application")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Context params are provided on the server side via the "),e("code",[t._v("@wp.page")]),t._v(" and "),e("code",[t._v("wp.info")]),t._v(" custom tags. Note that the "),e("code",[t._v("wp.info")]),t._v(" tag retrieves values by key for the info context as well as system parameters when the key is "),e("code",[t._v("systemParam")]),t._v(". See the "),e("RouterLink",{attrs:{to:"/v7.2/docs/reference/freemarker-tags/freemarker-core-tags.html"}},[t._v("Core Tag Library")]),t._v(" for more information.")],1)]),t._v(" "),e("h2",{attrs:{id:"prerequisites"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[t._v("#")]),t._v(" Prerequisites")]),t._v(" "),e("ul",[e("li",[e("RouterLink",{attrs:{to:"/v7.2/docs/getting-started/"}},[t._v("A working instance of Entando")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/v7.2/tutorials/create/mfe/widget-configuration.html"}},[t._v("A configurable React MFE")])],1)]),t._v(" "),e("h2",{attrs:{id:"configure-the-mfe-to-display-context-parameters"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configure-the-mfe-to-display-context-parameters"}},[t._v("#")]),t._v(" Configure the MFE to Display Context Parameters")]),t._v(" "),e("p",[t._v("This tutorial starts where the "),e("RouterLink",{attrs:{to:"/v7.2/tutorials/create/mfe/widget-configuration.html"}},[t._v("configurable React MFE tutorial")]),t._v(" ends since many of the changes required to enable context parameters are also required when preparing a config MFE. Those changes include modifying the custom element to accept the "),e("code",[t._v("config")]),t._v(" JSON from Entando, enabling a local test setup using "),e("code",[t._v("mfe-config.json")]),t._v(", and configuring the bundle descriptor "),e("code",[t._v("entando.json")]),t._v(".")],1),t._v(" "),e("ol",[e("li",[t._v("Edit the "),e("code",[t._v("simple-mfe/src/App.js")]),t._v(". Start by updating the existing "),e("code",[t._v("config")]),t._v(" mapping:")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" contextParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" config "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("Edit "),e("code",[t._v("App.js")]),t._v(" to show the values of the "),e("code",[t._v("contextParams")]),t._v(". Add this code inside the "),e("code",[t._v("<header>")]),t._v(" element:")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" contextParams "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Page Code"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("contextParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("page_code"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Current Language"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("contextParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info_currentLang"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Application Base "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("contextParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("systemParam_applicationBaseURL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("Provide sample data in the "),e("code",[t._v("simple-mfe/public/mfe-config.json")]),t._v(" so you can test this locally:")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"contextParams"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"page_code"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-page"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"info_currentLang"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"it"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"systemParam_applicationBaseURL"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://my-production-url/entando-de-app"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[t._v("Start up the MFE and confirm it can display the context parameters:")])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("ent bundle run simple-mfe\n")])])]),e("h2",{attrs:{id:"configure-and-publish-the-bundle"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configure-and-publish-the-bundle"}},[t._v("#")]),t._v(" Configure and Publish the Bundle")]),t._v(" "),e("ol",[e("li",[t._v("Edit "),e("code",[t._v("entando.json")]),t._v(" and add the following block to the "),e("code",[t._v("simple-mfe")]),t._v(" micro frontend definition:")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"contextParams"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"page_code"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"info_currentLang"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"systemParam_applicationBaseURL"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("You can now "),e("RouterLink",{attrs:{to:"/v7.2/tutorials/create/pb/publish-project-bundle.html"}},[t._v("build and install the bundle")]),t._v(":")],1)]),t._v(" "),e("EntandoInstallBundle"),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("Add the widget to a page in your Entando Application to confirm the context parameters display correctly. If you modify a page URL to select a different language (e.g. change "),e("code",[t._v("YOUR-BASE-URL/entando-de-app/en/demo.page")]),t._v(" to "),e("code",[t._v("YOUR-BASE-URL/entando-de-app/it/demo.page")]),t._v("), the current language parameter ("),e("code",[t._v("info_currentLang")]),t._v(") should change from "),e("code",[t._v("en")]),t._v(" to "),e("code",[t._v("it")]),t._v(".")])])],1)}),[],!1,null,null,null);a.default=r.exports}}]);