(window.webpackJsonp=window.webpackJsonp||[]).push([[737],{2031:function(t,e,a){"use strict";a.r(e);var s=a(36),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"install-bundle-from-a-private-image-registry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-bundle-from-a-private-image-registry"}},[t._v("#")]),t._v(" Install Bundle from a Private Image Registry")]),t._v(" "),a("p",[t._v("This tutorial provides to way to utilize bundles from a private image registry in your Entando projects. The steps below use environment variables to pass the Secret for authentication required by private registries.")]),t._v(" "),a("p",[t._v("For microservices in a private image registry, follow the "),a("RouterLink",{attrs:{to:"/v7.1/tutorials/curate/ms-private-images.html"}},[t._v("install guide here")]),t._v(".")],1),t._v(" "),a("h2",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[t._v("#")]),t._v(" Prerequisites")]),t._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/docs/getting-started/"}},[t._v("A working instance of Entando")])],1),t._v(" "),a("li",[t._v("Verify dependencies with the "),a("RouterLink",{attrs:{to:"/v7.1/docs/getting-started/entando-cli.html#check-the-environment"}},[t._v("Entando CLI")]),t._v(": "),a("code",[t._v("ent check-env develop")])],1)]),t._v(" "),a("h2",{attrs:{id:"tutorial"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tutorial"}},[t._v("#")]),t._v(" Tutorial")]),t._v(" "),a("h3",{attrs:{id:"step-1-create-the-registry-credentials"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-1-create-the-registry-credentials"}},[t._v("#")]),t._v(" Step 1: Create the Registry Credentials")]),t._v(" "),a("ol",[a("li",[t._v("Create the registry JSON configuration using your registry and credentials on the port of your choice:")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n  "auths": {\n    "YOUR-REGISTRY.com": {\n       "username": "YOUR-USERNAME",\n       "password": "YOUR-PASSWORD"\n    }\n  }\n}\n\n')])])]),a("ol",{attrs:{start:"2"}},[a("li",[a("a",{attrs:{href:"https://www.base64encode.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Convert the JSON configuration into a base64 string"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"step-2-create-and-apply-the-secret"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-2-create-and-apply-the-secret"}},[t._v("#")]),t._v(" Step 2: Create and Apply the Secret")]),t._v(" "),a("ol",[a("li",[t._v("Create "),a("code",[t._v("container-registry-secret.yaml")]),t._v(" in your namespace with the following snippet. Replace the registryCredentials value with your own.")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Secret\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("secret\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Opaque\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("registryCredentials")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ewogICJhdXRocyI6IHsKICAgICJyZWdpc3RyeS5odWIuZG9ja2VyLmNvbSI6IHsKICAgICAgICAidXNlcm5hbWUiOiAidGVzdG5hbWV4eHgiLAogICAgICAgICJwYXNzd29yZCI6ICJUZXN0bmFtZXBhc3N3ZCIKfQp9Cn0="')]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Apply the registry Secret YAML to your Entando instance, replacing the namespace with your own as needed:")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("ent kubectl apply -f container-registry-secret.yaml -n entando\n")])])]),a("h3",{attrs:{id:"step-3-add-the-environment-variable-and-deploy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-3-add-the-environment-variable-and-deploy"}},[t._v("#")]),t._v(" Step 3: Add the Environment Variable and Deploy")]),t._v(" "),a("ol",[a("li",[t._v("Add the environment variable, ENTANDO_CONTAINER_REGISTRY_CREDENTIALS, to your EntandoApp custom resource. To edit the EntandoApp using your namespace:")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("ent kubectl get EntandoApp -n entando\nent kubectl edit EntandoApp/quickstart -n entando\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Add the "),a("code",[t._v("environmentVariables")]),t._v(" under the spec property as shown here:")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" EntandoApp\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environmentVariables")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ENTANDO_CONTAINER_REGISTRY_CREDENTIALS\n         "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("valueFrom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("secretKeyRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n               "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("secret\n               "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" registryCredentials\n\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("(Entando 7.1.0-7.1.1 only) The Component Manager (CM) deployment requires modification due to an open issue. Scale the deployment down to 0, add the following spec for the HOME variable, and then restart the CM.")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" HOME\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /deployments\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("Deploy and install the bundle into Entando:")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ent bundle deploy\nent bundle install\n")])])]),a("p",[a("strong",[t._v("Next Steps")])]),t._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/v7.1/tutorials/curate/ms-private-images.html"}},[t._v("Install Microservices from a Private Image Registry")]),t._v(".")],1),t._v(" "),a("li",[t._v("Learn how to "),a("RouterLink",{attrs:{to:"/v7.1/tutorials/compose/page-management.html"}},[t._v("create a page")]),t._v(" in the Entando App Builder.")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);