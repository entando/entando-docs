(window.webpackJsonp=window.webpackJsonp||[]).push([[415],{1538:function(e,t,a){"use strict";a.r(t);var o=a(36),n=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"installation-on-openshift"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation-on-openshift"}},[e._v("#")]),e._v(" Installation on OpenShift")]),e._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),a("p",[e._v("This tutorial shows how to manually install Entando into OpenShift 4.x. "),a("strong",[e._v("Installation via the  Entando Operator is highly recommended for OpenShift 4.6+.")]),e._v(" See the "),a("RouterLink",{attrs:{to:"/next/tutorials/getting-started/openshift-install-by-operator.html"}},[e._v("Installation on Red Hat OpenShift using the Operator tutorial")]),e._v(" for specific instructions.")],1),e._v(" "),a("h2",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),a("ul",[a("li",[e._v("An OpenShift 4.x installation")]),e._v(" "),a("li",[e._v("The "),a("a",{attrs:{href:"https://docs.openshift.com/container-platform/4.8/cli_reference/openshift_cli/getting-started-cli.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("OpenShift CLI"),a("OutboundLink")],1),e._v(", e.g. "),a("code",[e._v("oc")])])]),e._v(" "),a("h3",{attrs:{id:"local-installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#local-installation"}},[e._v("#")]),e._v(" Local Installation")]),e._v(" "),a("p",[e._v("You can run OpenShift 4.x in your local development environment with Code Ready Containers (CRC). Use the local development version for the cluster where you intend to deploy your application. See "),a("a",{attrs:{href:"https://developers.redhat.com/products/codeready-containers/download",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://developers.redhat.com/products/codeready-containers/download"),a("OutboundLink")],1),e._v(" for more details.")]),e._v(" "),a("h2",{attrs:{id:"create-the-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-the-project"}},[e._v("#")]),e._v(" Create the Project")]),e._v(" "),a("p",[e._v("The steps in this section require cluster admin access. If you are using CRC, make sure to use the administrator login provided when you started your local instance.")]),e._v(" "),a("ol",[a("li",[e._v("Login to your OpenShift environment. There are two options:")])]),e._v(" "),a("ul",[a("li",[e._v("Use the "),a("code",[e._v("oc login")]),e._v(" command, which can be found under the profile menu in OpenShift.")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("oc login --token"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("sha256~TO3QCeoLSbprlGZARBOBVAoaKFeb9Ag0RxztYifAcjE --server"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("https://api.cluster-4bb2.4bb2.example.opentlc.com:6443\n")])])]),a("ul",[a("li",[e._v("Use the command line interface from the OpenShift Console.")])]),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Install the cluster-scoped custom resource definitions (CRDs). This step is only required once per cluster.")])]),e._v(" "),a("EntandoCode",[e._v("kubectl apply -f https://raw.githubusercontent.com/entando/entando-releases/"+e._s(e.$site.themeConfig.entando.fixpack.v73)+"/dist/ge-1-1-6/namespace-scoped-deployment/cluster-resources.yaml\n")]),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[e._v("Create the project for your application")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("oc new-project entando\n")])])]),a("p",[e._v("Note: If you choose a different name for your project, adjust the commands below to supply your project name (e.g. "),a("code",[e._v("-n YOUR-PROJECT")]),e._v(") or use the "),a("code",[e._v("oc project")]),e._v(" command to select the project.")]),e._v(" "),a("p",[e._v("The remaining steps in this tutorial can be performed by a user with project-level access, rather than a cluster admin.")]),e._v(" "),a("h2",{attrs:{id:"configure-the-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-the-project"}},[e._v("#")]),e._v(" Configure the Project")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("(Optional) A ConfigMap can be used to modify the behavior of the Entando Operator. Refer to the "),a("RouterLink",{attrs:{to:"/next/tutorials/consume/entando-operator.html"}},[e._v("Entando Operator")]),e._v(" page for more information.")],1)]),e._v(" "),a("li",[a("p",[e._v("Install the namespace-scoped custom resources")])])]),e._v(" "),a("EntandoCode",[e._v('curl -sLO "https://raw.githubusercontent.com/entando/entando-releases/'+e._s(e.$site.themeConfig.entando.fixpack.v73)+'/dist/ge-1-1-6//namespace-scoped-deployment/namespace-resources.yaml"')]),e._v(" "),a("h2",{attrs:{id:"configure-the-entando-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-the-entando-application"}},[e._v("#")]),e._v(" Configure the Entando Application")]),e._v(" "),a("ol",[a("li",[e._v("Download the "),a("code",[e._v("entando-app.yaml")]),e._v(" template")])]),e._v(" "),a("EntandoCode",[e._v('curl -sLO "https://raw.githubusercontent.com/entando/entando-releases/'+e._s(e.$site.themeConfig.entando.fixpack.v73)+'/dist/ge-1-1-6/samples/entando-app.yaml"')]),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Determine the hostname for your application, YOUR-HOST-NAME")])]),e._v(" "),a("ul",[a("li",[e._v("If you're deploying to a managed cluster:\n"),a("ul",[a("li",[e._v("Determine the default hostname of your cluster. If you're unsure of the default hostname, please check with your cluster administrator.")]),e._v(" "),a("li",[e._v("Add a prefix with the name of your project or application. For example, YOUR-HOST-NAME could be "),a("code",[e._v("my-app.apps.cluster-4bb2.4bb2.example.opentlc.com")]),e._v(", where "),a("code",[e._v("apps.cluster-4bb2.4bb2.example.opentlc.com")]),e._v(" is the hostname of the OpenShift cluster.")]),e._v(" "),a("li",[e._v("Entando creates the application using this address and relies on wildcard DNS resolution.")])])]),e._v(" "),a("li",[e._v("If you're using CRC:\n"),a("ul",[a("li",[e._v("Determine the IP address (YOUR-IP) of your cluster with "),a("code",[e._v("crc ip")])]),e._v(" "),a("li",[e._v("Your IP-based YOUR-HOST-NAME should follow this pattern: "),a("code",[e._v("quickstart.YOUR-IP.nip.io")]),e._v(", e.g. "),a("code",[e._v("quickstart.192.168.64.33.nip.io")]),e._v(". The suffix "),a("code",[e._v(".nip.io")]),e._v(" makes use of the free "),a("a",{attrs:{href:"https://nip.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("nip.io"),a("OutboundLink")],1),e._v(" DNS service so that any requests to this host name will resolve to your CRC instance. The prefix "),a("code",[e._v("quickstart")]),e._v(" is arbitrary.")])])])]),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[e._v("Edit "),a("code",[e._v("entando-app.yaml")]),e._v(" and replace YOUR-HOST-NAME with the address from above. See the "),a("RouterLink",{attrs:{to:"/next/docs/reference/entandoapp-cr.html"}},[e._v("Custom Resources overview")]),e._v(" for details on other "),a("code",[e._v("EntandoApp")]),e._v(" options.")],1)]),e._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("ingressHostName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" YOUR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("HOST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("NAME\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[e._v('(Optional) If you used a name other than "entando" for your project, you\'ll also want to update the metadata/namespace property in '),a("code",[e._v("entando-app.yaml")]),e._v(" to match.")])]),e._v(" "),a("h2",{attrs:{id:"deploy-the-entando-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-the-entando-application"}},[e._v("#")]),e._v(" Deploy the Entando Application")]),e._v(" "),a("ol",[a("li",[e._v("Deploy Entando")])]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("oc apply -n entando -f entando-app.yaml\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("It can take around 10 minutes for the application to fully deploy. You can watch the pods warming up with this command:")])]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("oc get pods -n entando --watch\n")])])]),a("p",[e._v("Use "),a("code",[e._v("Ctrl+C")]),e._v(" to exit the command.")]),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[e._v("Once all the pods are in a running state, access the Entando App Builder at the following address:")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("http://YOUR-HOST-NAME/app-builder/\n")])])]),a("h2",{attrs:{id:"next-steps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#next-steps"}},[e._v("#")]),e._v(" Next Steps")]),e._v(" "),a("p",[e._v("Congratulations! To continue your journey with Entando, see the "),a("RouterLink",{attrs:{to:"/next/docs/getting-started/#login-to-entando"}},[e._v("Getting Started guide")]),e._v(" for helpful login instructions and next steps.")],1),e._v(" "),a("h2",{attrs:{id:"appendix-troubleshooting-and-common-errors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#appendix-troubleshooting-and-common-errors"}},[e._v("#")]),e._v(" Appendix - Troubleshooting and Common Errors")]),e._v(" "),a("h3",{attrs:{id:"permission-errors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#permission-errors"}},[e._v("#")]),e._v(" Permission Errors")]),e._v(" "),a("p",[e._v("If deploying your Entando Application into your OpenShift namespace generates permission errors, make sure the namespace you're deploying to has the "),a("code",[e._v("escalate")]),e._v(" and "),a("code",[e._v("bind")]),e._v(" verbs on Roles. Before installing Entando, run "),a("code",[e._v("oc auth can-i escalate role")]),e._v(" with your given user in the targeted namespace. If "),a("code",[e._v("yes")]),e._v(" is returned, the installation should complete. Note that access is only required in the namespace where you are deploying your Entando Application. No cluster level access is required.")]),e._v(" "),a("p",[e._v("Check with your cluster administrator if you need help assigning Roles. Generally, this requires the creation of a Role, preferably a ClusterRole with the above permissions. Your Entando installer needs to be given this Role in the target namespace, in accordance with how administrators manage security. For example, if the ClusterRole is "),a("code",[e._v("entando-installer")]),e._v(" and the user's name is John, you can add the Role to the user with this command:\n"),a("code",[e._v("oc policy add-role-to-user entando-installer john -n <your-namespace>")]),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"forbidden-error-installing-entando-custom-resource-definitions-in-crc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#forbidden-error-installing-entando-custom-resource-definitions-in-crc"}},[e._v("#")]),e._v(" Forbidden Error Installing Entando Custom Resource Definitions in CRC")]),e._v(" "),a("p",[e._v("If installing the CRDs in your local instance generates an error like the one below, you need to login as an administrator.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('/opt/ocInstallLocal$ oc create -f dist/crd/\nError from server (Forbidden): error when creating "dist/crd/EntandoAppCRD.yaml": customresourcedefinitions.apiextensions.k8s.io is forbidden: User "developer" cannot create resource "customresourcedefinitions" in API group "apiextensions.k8s.io" at the cluster scope\n')])])]),a("p",[e._v("Administrator credentials are printed when you start your local cluster. For example:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("To access the cluster, first set up your environment by following 'crc oc-env' instructions\nINFO Then you can access it by running 'oc login -u developer -p developer https://api.crc.testing:6443'\nINFO To login as an admin, username is 'kubeadmin' and password is xxxx-xxxx-xxxx-xxxx\n")])])]),a("h3",{attrs:{id:"network-issues"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#network-issues"}},[e._v("#")]),e._v(" Network Issues")]),e._v(" "),a("p",[e._v("If you see errors when images are being retrieved (such as ErrImagePull or ImagePullBackOff), you may want to start CRC using "),a("code",[e._v('crc start -n "8.8.8.8')]),e._v(", or configure the nameserver with "),a("code",[e._v("crc config set nameserver 8.8.8.8")]),e._v(" before running "),a("code",[e._v("crc start")]),e._v(". This will allow the cluster to perform DNS lookups via Google's public DNS server.")]),e._v(" "),a("p",[e._v("If you're on Windows, you should also check out these "),a("RouterLink",{attrs:{to:"/next/docs/reference/local-tips-and-tricks.html"}},[e._v("Tips and Tricks")]),e._v(" since CRC relies on Windows Hyper-V by default. This can result in network issues when the host computer is restarted.")],1)],1)}),[],!1,null,null,null);t.default=n.exports}}]);